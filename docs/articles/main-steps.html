<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Multisource Graph Synthesis with EHR Data â€¢ MUGS</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Multisource Graph Synthesis with EHR Data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MUGS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Preference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-function-usage" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Function Usage</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-function-usage">
<li><a class="dropdown-item" href="../articles/CodeEff_Matrix_usage.html">CodeEff_Matrix</a></li>
    <li><a class="dropdown-item" href="../articles/CodeSiteEff_I2_par_usage.html">CodeSiteEff_I2_par</a></li>
    <li><a class="dropdown-item" href="../articles/DataGen_rare_group_usage.html">DataGen_rare_group</a></li>
    <li><a class="dropdown-item" href="../articles/Evaluation_sim_usage.html">Evaluation_sim</a></li>
    <li><a class="dropdown-item" href="../articles/get_embed_usage.html">get_embed</a></li>
    <li><a class="dropdown-item" href="../articles/GroupEff_par_usage.html">GroupEff_par</a></li>
  </ul>
</li>
<li class="active nav-item"><a class="nav-link" href="../articles/main-steps.html">Main Steps</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/celehs/MUGS/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Multisource Graph Synthesis with EHR Data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/celehs/MUGS/blob/HEAD/vignettes/main-steps.Rmd" class="external-link"><code>vignettes/main-steps.Rmd</code></a></small>
      <div class="d-none name"><code>main-steps.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/celehs/MUGS" class="external-link">MUGS</a></span><span class="op">)</span></span></code></pre></div>
<p>Load data into R, including the SPPMI matrix from the two sites with
row names and column names being the names of codes, i.e., S.1 and S.2.
Also, load the dummy matrix for group structures at the two sites with
row names being the code names and column names being the group names,
i.e., X.group.source and X.group.target. Include the code-code pairs
used for hyperparameters tuning, i.e., pairs.rel.CV. If you also want to
perform evaluation of the code embeddings, please load the code-code
pairs used for AUC calculation, i.e., pairs.rel.EV.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download and load a dataset</span></span>
<span><span class="va">pairs.rel.CV</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_pairs_rel_CV.html">load_pairs_rel_CV</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pairs.rel.CV</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pairs.rel.EV</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_pairs_rel_EV.html">load_pairs_rel_EV</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pairs.rel.CV</span><span class="op">)</span></span>
<span></span>
<span><span class="va">S_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_S_1.html">load_S_1</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">S_1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">S.2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_S_1.html">load_S_1</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">S.2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">U.1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_S_1.html">load_S_1</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">U.1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">U.2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_S_1.html">load_S_1</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">U.2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">X.group.source</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_X_group_source.html">load_X_group_source</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">X.group.source</span><span class="op">)</span></span>
<span></span>
<span><span class="va">X.group.target</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_X_group_target.html">load_X_group_target</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">X.group.target</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">S.1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">S.2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">X.group.source</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">X.group.target</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">pairs.rel.CV</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">pairs.rel.EV</span><span class="op">)</span></span></code></pre></div>
<p>To tune the hyperparameters for code effects and code-site effects,
set TUNE = TRUE and Eva = FALSE. The Lambda parameter should be a vector
of positive values representing the tuning parameter for code effects.
Similarly, Lambda.delta should be a vector of positive values for the
tuning parameter for code-site effects. The n.core parameter specifies
the number of cores to use for parallel computing, enhancing
performance. The tol parameter sets the tolerance for convergence,
determining when the algorithm should stop iterating. The seed parameter
ensures reproducibility of results. The p parameter defines the
dimension of the embedding vector, and n.group specifies the number of
code groups.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/MUGS.html">MUGS</a></span><span class="op">(</span>TUNE <span class="op">=</span> <span class="cn">T</span>, Eva <span class="op">=</span> <span class="cn">F</span>, Lambda <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">100</span><span class="op">)</span>, Lambda.delta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">10000</span><span class="op">)</span>, n.core<span class="op">=</span><span class="fl">4</span>, tol<span class="op">=</span><span class="fl">1</span>, seed<span class="op">=</span><span class="fl">1</span>, </span>
<span>     S.1 <span class="op">=</span> <span class="va">S.1</span>, S.2 <span class="op">=</span> <span class="va">S.2</span>, X.group.source <span class="op">=</span> <span class="va">X.group.source</span>, X.group.target<span class="op">=</span><span class="va">X.group.target</span>, </span>
<span>     pairs.rel.CV <span class="op">=</span>  <span class="va">pairs.rel.CV</span>, pairs.rel.EV <span class="op">=</span>  <span class="va">pairs.rel.EV</span>, p <span class="op">=</span> <span class="fl">10</span>, n.group <span class="op">=</span> <span class="fl">400</span><span class="op">)</span></span></code></pre></div>
<p>With optimal hyperparameters determined, set TUNE = FALSE to generate
MUGS embeddings for code groups, as well as individual code embeddings
at the two sites. This configuration will also produce cosine similarity
matrices for the two sites and lists of homogeneous codes (codes similar
across sites) and heterogeneous codes (codes different across sites). If
you wish to evaluate the MUGS code embeddings further, using the
pairs.rel.EV dataset for AUC calculation, set Eva = TRUE.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/MUGS.html">MUGS</a></span><span class="op">(</span>TUNE <span class="op">=</span> <span class="cn">F</span>, Eva <span class="op">=</span> <span class="cn">T</span>, Lambda <span class="op">=</span> <span class="fl">10</span>, Lambda.delta <span class="op">=</span> <span class="fl">1000</span>, n.core<span class="op">=</span><span class="fl">4</span>, tol<span class="op">=</span><span class="fl">1</span>, seed<span class="op">=</span><span class="fl">1</span>, </span>
<span>     S.1 <span class="op">=</span> <span class="va">S.1</span>, S.2 <span class="op">=</span> <span class="va">S.2</span>, X.group.source <span class="op">=</span> <span class="va">X.group.source</span>, X.group.target<span class="op">=</span><span class="va">X.group.target</span>, </span>
<span>     pairs.rel.CV <span class="op">=</span>  <span class="va">pairs.rel.CV</span>, pairs.rel.EV <span class="op">=</span>  <span class="va">pairs.rel.EV</span>, p <span class="op">=</span> <span class="fl">10</span>, n.group <span class="op">=</span> <span class="fl">400</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Li, M., Li, X., Pan, K., Geva, A., Yang, D., Sweet, S. M., Bonzel,
C.-L., Panickan, V. A., Xiong, X., Mandl, K., &amp; Cai, T. (2024).
Multisource representation learning for pediatric knowledge extraction
from electronic health records. npj Digital Medicine. <a href="https://doi.org/10.1038/s41746-024-01320-4" class="external-link uri">https://doi.org/10.1038/s41746-024-01320-4</a></p>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mengyan Li, Xiaoou Li, Tianxi Cai, PARSE LTD, CELEHS Team.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
