<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Multisource Graph Synthesis with EHR Data • MUGS</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Multisource Graph Synthesis with EHR Data">
<meta name="description" content="We develop MUlti-source Graph Synthesis (MUGS), an algorithm designed to create embeddings for pediatric EHR codes by leveraging graphical information from three distinct sources： (1) pediatric EHR data, (2) EHR data from the general patient population, and (3) existing hierarchical medical ontology knowledge shared across different patient populations.">
<meta property="og:description" content="We develop MUlti-source Graph Synthesis (MUGS), an algorithm designed to create embeddings for pediatric EHR codes by leveraging graphical information from three distinct sources： (1) pediatric EHR data, (2) EHR data from the general patient population, and (3) existing hierarchical medical ontology knowledge shared across different patient populations.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">MUGS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Preference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-function-usage" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Function Usage</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-function-usage">
<li><a class="dropdown-item" href="articles/CodeEff_Matrix_usage.html">CodeEff_Matrix</a></li>
    <li><a class="dropdown-item" href="articles/CodeSiteEff_I2_par_usage.html">CodeSiteEff_I2_par</a></li>
    <li><a class="dropdown-item" href="articles/DataGen_rare_group_usage.html">DataGen_rare_group</a></li>
    <li><a class="dropdown-item" href="articles/Evaluation_sim_usage.html">Evaluation_sim</a></li>
    <li><a class="dropdown-item" href="articles/get_embed_usage.html">get_embed</a></li>
    <li><a class="dropdown-item" href="articles/GroupEff_par_usage.html">GroupEff_par</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="articles/main-steps.html">Main Steps</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/celehs/MUGS/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="multisource-graph-synthesis-with-ehr-data">Multisource Graph Synthesis with EHR data<a class="anchor" aria-label="anchor" href="#multisource-graph-synthesis-with-ehr-data"></a>
</h1></div>
<p><a href="https://CRAN.R-project.org/package=PheCAP" class="external-link"><img src="https://www.r-pkg.org/badges/version/PheCAP" alt="CRAN"></a> —– This needs to be changed once we have the links</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
</div>
</div>
<div class="section level1">
<h1 id="mugs">MUGS<a class="anchor" aria-label="anchor" href="#mugs"></a>
</h1>
<p>We develop MUlti-source Graph Synthesis (MUGS), an algorithm designed to create embeddings for pediatric EHR codes by leveraging graphical information from three distinct sources: (1) pediatric EHR data, (2) EHR data from the general patient population, and (3) existing hierarchical medical ontology knowledge shared across different patient populations.</p>
<p>Utilizing existing hierarchical medical ontology as prior general knowledge, MUGS facilitates efficient transfer learning by grouping similar codes, thereby enhancing the transferability of knowledge from general to pediatric systems. To address the heterogeneity within code groups and between sites, we propose to decompose a code embedding into three components: the group effect, defined based on the hierarchical medical ontology; the site-nonspecific code effect, capturing characteristics of a code that differ from its group effect and are shared between health systems; and the code-site effect, identifying site-specific traits of a code. Importantly, this decomposition, coupled with penalty functions applied to the code and code-site effects, provides adaptability to varying degrees of heterogeneity within code groups and between sites and protects against the adverse effects of negative knowledge transfer via hyperparameter tuning.</p>
<figure><img src="reference/figures/MUGSFlowchart.png" alt="Flowchart"><figcaption aria-hidden="true">
Flowchart
</figcaption></figure><p>First, we obtain the two sets of initial embeddings at each site by using ‘get_embed’ function, then align them by solving the orthogonal procrustes problem. Second, we utilize the existing hierarchical medical ontology of PheCodes, LOINC codes, and RxNorms to group similar codes (<a href="https://shiny.parse-health.org/hierarchies/" class="external-link uri">https://shiny.parse-health.org/hierarchies/</a>), and train initial embeddings for group effects, code effects, and code-site effects by pooling the two sets of aligned embeddings. Third, we commence our core algorithm: updating group effects, code effects, and code-site effects in an alternating and iterative fashion. ‘GroupEff_par’ and ‘CodeSiteEff_l2_par’ are used to update group effects and code-site effects, respectively, utilizing parallel computations across multiple cores or machines to enhance speed. ‘CodeEff_Matrix’ is used to update code effects via matrix computations.</p>
<p>For hyperparameter tuning, we leverage code-code pairs curated from related literature. This helps us select the optimal tuning parameters associated with the penalties on code effects and code-site effects without the need for data splitting. The performance of different sets of embeddings with different tuning parameters is evaluated using ‘evaluation.sim’. It is designed to assess the accuracy of the embeddings in identifying established related pairs versus random pairs across a wide range of settings.</p>
<p>Although we cannot share the real data from MGB and BCH used to generate our MUGS embeddings, we have developed a Shiny App (<a href="https://shiny.parse-health.org/multi-view-net/" class="external-link uri">https://shiny.parse-health.org/multi-view-net/</a>) to support downstream tasks such as pediatric feature engineering, the construction of pediatric knowledge graphs, and more.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install stable version from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"MUGS"</span><span class="op">)</span></span></code></pre></div>
<p>Install development version from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"celehs/MUGS"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>Load in the simulated data (…) and try the R codes from the vignette [MUGS.Rmd] (…).</p>
<p>To use real EHR data, first convert the data into the same format as the simulated data. Detailed guidelines for data formatting are included in MUGS.Rmd. Once formatted, call the main function ‘MUGS’ with your data as input.</p>
</div>
<div class="section level2">
<h2 id="citations">Citations<a class="anchor" aria-label="anchor" href="#citations"></a>
</h2>
<p>Li, M., Li, X., Pan, K., Geva, A., Yang, D., Sweet, S. M., Bonzel, C.-L., Panickan, V. A., Xiong, X., Mandl, K., &amp; Cai, T. (2024). Multisource representation learning for pediatric knowledge extraction from electronic health records. npj Digital Medicine. <a href="https://doi.org/10.1038/s41746-024-01320-4" class="external-link uri">https://doi.org/10.1038/s41746-024-01320-4</a></p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/celehs/MUGS/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing MUGS</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Mengyan Li <br><small class="roles"> Maintainer, author </small>  </li>
<li>Xiaoou Li <br><small class="roles"> Author </small>  </li>
<li>Tianxi Cai <br><small class="roles"> Author </small>  </li>
<li>PARSE LTD <br><small class="roles"> Author </small>  </li>
<li>CELEHS Team <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mengyan Li, Xiaoou Li, Tianxi Cai, PARSE LTD, CELEHS Team.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
